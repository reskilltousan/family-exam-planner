# プロダクト概要（Feature Request）

## 1. 概要

本プロジェクトでは、**受験期の子どもを抱える家庭向けの「家族スケジュール & タスク管理」Webアプリ**を開発する。

このアプリは、次の2つの世界の「間」に位置する立ち位置をとる：

- 汎用カレンダーサービス（Googleカレンダー 等）
- 受験情報ポータル（UCARO、パスナビ 等）

目指すのは、

- 子どもに関するあらゆるイベント  
  （学校・塾・習い事・模試・本番試験 など）を **1カ所で管理**し、
- それらを
  - 申し込み
  - 支払い
  - 受験票印刷
  - 持ち物準備
  などの **準備タスクに分解して家族内で分担できる** ようにし、
- さらに **親の予定（Googleカレンダー）とも重ねて見られる「家族ビュー」** を提供すること。

### 1.1 スコープレイヤー定義

本ドキュメントでは、スコープを以下の3レイヤーで定義する。

- **MVP（Phase 1）**  
  Tech0 の最終発表までに **必ず完成させる範囲**。  
  → 「家族スケジュール & 受験タスク管理」がひととおり回るところまで。

- **拡張版（Phase 2）**  
  すえさんの「アプリ制作案」をベースに、**実用度・UX を高めるための拡張機能**。  
  → テンプレート・PDF・メモ/スタンプなど、日々の運用がかなり楽になるライン。

- **将来機能（Phase 3）**  
  実験的・高度な機能。  
  → 時間やリソースに余裕が出たタイミングで検討する領域。


## 2. 想定ユーザーとコア価値

### 2.1 想定ユーザー

- 1人以上の子どもがいる家庭の保護者
- 中学・高校・大学などの受験を控えた／意識し始めた家庭
- 次のような状況にある家庭：
  - 紙プリント・学校ポータル・塾アプリ・Googleカレンダーなど、  
    情報がバラバラなところに存在している
  - 家族のうち1人（多くは保護者）がスケジュール管理を一手に担い、**負担感が大きい**

### 2.2 コア価値

- 家族の「受験期の生活」を管理するための **単一のコックピット** を提供する
  - **誰が・いつ・どこに行くのか** を一目で把握できる
  - **いつまでに何をやる必要があるか**（申込・支払・印刷・準備）を整理できる
  - **ダブルブッキングや物理的に無理なスケジュール** を早めに検知できる
- 一方で、
  - 大学情報の網羅
  - 合否照会
  - 公式出願ポータル
  といった領域には踏み込まず、**家庭内の情報整理・役割分担に特化**する。


## 3. Phase 1（MVP）に含める機能スコープ

Tech0 発表までに **動いていてほしい最低ライン**。

### 3.1 家族・メンバー管理

- **家族アカウント作成**
  - 当面は「1アカウント＝1家族」を前提とする
- **家族メンバー管理**
  - ロール：`parent` / `child`（＋必要なら `admin`）
  - 子どもごとの基本情報（名前、学年など）
- アクセス制御：
  - MVPでは「家族全員で共有」を基本とし、細かい権限管理は後回し

### 3.2 イベント管理（学校・塾・習い事・受験）

- **イベントのCRUD**
  - タイトル
  - 日付・開始時刻・終了時刻
  - 種別：`school` / `cram` / `lesson` / `exam` / `other`
  - 重要度：`must` / `should` / `optional`
  - 参加者：1人以上の子ども、必要に応じて保護者
  - 任意項目：場所、メモ
- **カレンダービュー**
  - 家族全体の **週表示・月表示**
  - 子ども・イベント種別によるフィルタ

### 3.3 準備タスク（イベントに紐づくToDo）

- 各イベントに対して **準備タスク** を紐づけられる
  - タイトル
  - 期限（due date）
  - ステータス：`not_started` / `in_progress` / `done`
  - 担当者：保護者A／保護者B／子ども など
- 主な用途：
  - 受験・模試の申込
  - 受験料などの支払
  - 受験票印刷
  - 持ち物・書類の準備
- MVPでは **タスクはユーザーが手動で追加する**  
  （テンプレートによる自動生成は Phase 2 以降）

### 3.4 子ども別ビュー

- 各子どもに対して次のビューを提供する：
  - **「今週の予定」ビュー**
    - その子が関わるイベント（7日間程度）を一覧表示
  - **「今週のタスク」ビュー**
    - その子に紐づくタスクをステータス別に表示
- 目的：
  - 子ども本人、もしくは保護者が、「この子の今週の予定・やること」を1画面で把握できること

### 3.5 Googleカレンダー連携（読み取り専用）

- **1家族につき1つのGoogleアカウント**を「親用カレンダー」として接続する
- 対応範囲（MVP）：
  - 指定期間（例：今週〜来週）のGoogleカレンダー予定を読み取り
  - アプリ内の家族カレンダー上に、**外部イベントとして重ねて表示**
  - Google由来のイベントは、アプリ内イベントと区別がつくように表示（アイコンやスタイルなど）
- スコープ：
  - MVPでは **一方向・読み取り専用（Google → 本アプリ）**
  - 本アプリからGoogleカレンダーへイベントを作成・更新する機能はMVP対象外

### 3.6 コンフリクト（二重予約）検知

- **重要度 `must` のイベント同士の時間重複を検知**
  - 同じ子どもが同じ時間帯に2つの `must` イベントに参加している
  - 同じ保護者が、同じ時間帯に2つの `must` イベントに割り当てられている（必要に応じて）
- 検知結果の表示：
  - カレンダー上で、該当イベントを赤枠・警告アイコンなどで表示
- MVPではロジックをシンプルに：
  - 同一日・同一時間帯の重複チェック程度からスタート（複雑な繰り返し予定は扱わない）

### 3.7 簡易メモ・ジャーナル

- 各イベントに対して **簡単なテキストメモ** を1つ以上登録できる：
  - 例：「先生に頑張りを褒められた」「模試のあとに家族でラーメン」
- MVPでは：
  - プレーンテキストのみ
  - 画像アップロードやリッチテキストは対象外


## 4. Phase 2（すえさん案ベースの拡張機能）

MVPが一通り回ったあとに、**実用度とUXを一気に上げる層**。  
すえさんの「アプリ制作案」の内容をコアとして反映していく。

### 4.1 受験テンプレート（タスク自動生成）

- 代表的なイベント種別ごとに **タスクテンプレート** を定義
  - 模試
  - 本番試験（A日程／B日程 など）
  - 説明会・オープンキャンパス 等
- イベント作成時にテンプレートを選択すると：
  - 所定のタスク（申込・支払・印刷・持ち物準備など）が自動で紐づく
- 後からタスクの追加・削除・編集も可能

### 4.2 週次PDF・印刷用ビュー

- 子ども別に **「今週の予定＆タスク」を1枚にまとめた印刷用ビュー** を提供
  - 週次PDF出力
  - もしくはブラウザ印刷を前提としたスタイル
- 家の壁や冷蔵庫に貼る運用を想定

### 4.3 子ども別タスク詳細ビュー / 自律支援

- 子どもごとに **「自分のタスク一覧」ページ** を提供
  - ステータスや締切順で並び替え
  - 終わったタスクを自分で完了にできるUI
- 子どもが自分で予定・タスクを管理する習慣のサポートを狙う

### 4.4 メモ・モチベーションログの強化

- イベント・タスクに対して：
  - 複数のメモを紐づけられる
  - 「Good Job」「おつかれさま」などの簡易スタンプ／リアクション
- 受験期を「張りつめた期間」だけでなく、  
  「一緒に頑張った記録」として振り返れるようにする。

### 4.5 コンフリクト一覧画面

- カレンダー上の警告に加えて、**コンフリクト専用リストビュー**を提供
  - どの日に、どの子／誰が、どのイベント同士でバッティングしているか
  - 対応検討のメモ欄
- 優先度の高い衝突から順に潰していきやすくする。

### 4.6 Tech0 デモ・オンボーディングの強化

- **デモ用サンプルデータ投入機能**
  - 仮想の家族・受験スケジュール・タスクが一括登録される
- **簡易チュートリアル**
  - 初回アクセス時に、主要画面の使い方をガイドする


## 5. Phase 3（将来機能）

時間・リソースに余裕が出てから検討する領域。  
MVPやPhase 2 には含めない。

### 5.1 高度な外部連携

- Googleカレンダーとの **双方向同期**
  - 本アプリからGoogle側のイベントを作成・更新・削除
- 学校ポータル・塾アプリとの連携
  - APIやスクレイピングによる情報取り込み

### 5.2 プリントOCR連携

- 学校・塾から配られるプリントを撮影／アップロード
- OCRで日付・タイトル・場所などを抽出し、
  - イベントのドラフト（下書き）を自動生成
- ユーザーは確認して保存するだけ、という体験を目指す

### 5.3 スマホ利用ルール・スクリーンタイム連携

- 子どものスマホ利用ルールを可視化：
  - 「今日のタスクが終わったらスマホOK」フラグなど
- OSレベルのスクリーンタイム情報との連携・可視化（技術的・運用的ハードルは高い）

### 5.4 UI/UX・多言語対応

- ダークモード
- テーマ切り替え
- 多言語対応（日本語／英語 など）
- リッチなアニメーション・トランジション

---

## 6. 技術的スコープと制約（Azure前提）

### 6.1 フロントエンド / バックエンド

- Next.js（App Router, TypeScript, React Compiler 有効）
- サーバーサイド処理は Next.js の Route Handlers / API Routes を利用
- UI は Tailwind CSS をベースに構築

### 6.2 データベース

- 本番環境の主なDBは **Azure上のリレーショナルDB** とする：
  - 候補：Azure Database for PostgreSQL もしくは Azure SQL Database
- ORMとして Prisma 等を利用し、Next.js からAzure DBに接続する前提
- ローカル開発では SQLite などの簡易DBで代替し、  
  マイグレーションで Azure DB に反映していく方針も可

### 6.3 認証

- MVPではシンプルな認証方式を想定：
  - 例：メールアドレス＋パスワード認証（Azure DBにハッシュを保存）
  - もしくは Auth.js（旧 NextAuth.js）などのライブラリを利用
- 複雑なロールベース権限管理は行わず、  
  「家族内共有」を前提としたシンプルなモデルとする

### 6.4 ホスティング

- 開発〜MVPデモ：
  - Vercel などを用いて迅速にデプロイしてもよい
- 本番想定・Tech0向け学習の観点では：
  - Next.js フロントを Azure App Service または Azure Static Web Apps にデプロイ
  - DBは Azure Database for PostgreSQL / Azure SQL Database を利用
- いずれの場合も、GitHub 連携による CI/CD を前提とする

### 6.5 Googleカレンダー

- Google Calendar API（OAuth2）を利用
- リフレッシュトークン等は Azure DB もしくは Azure Key Vault 等の安全なストアで管理
- MVPでは「1家族 = 1カレンダー」「読み取り専用」のみ対応


## 7. キーユースケース（実装時に意識するシナリオ）

実装・設計判断の際には、以下の代表シナリオが成立することを優先する。

### 7.1 保護者が家族と子どもを登録する

- 家族アカウントを作成
- 子ども（＋必要ならもう一人の保護者）を登録する

### 7.2 保護者が今後のイベントを入力する

- 学校プリント・塾のお知らせ・Web情報を見ながら、
  - 模試
  - 本番試験
  - 塾・習い事
  - 学校行事
  をイベントとして登録
- 各イベントに、該当する子どもを紐づける

### 7.3 保護者が準備タスクを登録・分担する

- 試験・模試イベントに対して、次のようなタスクを登録：
  - 「◯月◯日までに申込」
  - 「◯月◯日までに受験料支払」
  - 「前日までに受験票印刷」
  - 「当日の持ち物準備」
- タスクを、
  - 保護者A
  - 保護者B
  - 子ども本人
  などにアサインする

### 7.4 保護者がGoogleカレンダーを連携し、全体を俯瞰する

- 自分のGoogleアカウントを連携
- 仕事の予定などが家族カレンダーと重ねて表示される
- 受験・習い事などの `must` イベントと仕事予定のバッティングが一目で分かる

### 7.5 子ども（または保護者）が「今週の予定」を確認する

- 子ども別ビューを開き、
  - 今週のイベント
  - 今週のタスク
  を一覧で確認する
- 子どもまたは保護者が、終わったタスクを「完了」に更新する


## 8. 参考ドキュメント

- 詳細な企画背景・UXアイデアは **「アプリ制作案.docx」（すえさん案）** を参照。  
- Phase 2 以降の仕様は、随時このドキュメントとアプリ制作案を突き合わせながら更新していく。
