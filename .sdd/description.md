# プロダクト概要（Feature Request）

## 1. 概要

本プロジェクトでは、**受験期の子どもを抱える家庭向けの「家族スケジュール & タスク管理」Webアプリ**を開発する。

このアプリは、次の2つの世界の「間」に位置する立ち位置をとる：

- 汎用カレンダーサービス（Googleカレンダー 等）
- 受験情報ポータル（UCARO、パスナビ 等）

目指すのは、

- 子どもに関するあらゆるイベント  
  （学校・塾・習い事・模試・本番試験 など）を **1カ所で管理**し、
- それらを
  - 申し込み
  - 支払い
  - 受験票印刷
  - 持ち物準備
  などの **準備タスクに分解して家族内で分担できる** ようにし、
- さらに **親の予定（Googleカレンダー）とも重ねて見られる「家族ビュー」** を提供すること。

MVPとしては、**Next.js（App Router, TypeScript）＋ Azure 上のリレーショナルDB（例：Azure Database for PostgreSQL / Azure SQL Database）** を用いて、
Tech0のメンター・メンバーがブラウザ上で動作確認・デモができるレベルを目標とする。


## 2. 想定ユーザーとコア価値

### 2.1 想定ユーザー

- 1人以上の子どもがいる家庭の保護者
- 中学・高校・大学などの受験を控えた／意識し始めた家庭
- 次のような状況にある家庭：
  - 紙プリント・学校ポータル・塾アプリ・Googleカレンダーなど、  
    情報がバラバラなところに存在している
  - 家族のうち1人（多くは保護者）がスケジュール管理を一手に担い、**負担感が大きい**

### 2.2 コア価値

- 家族の「受験期の生活」を管理するための **単一のコックピット** を提供する
  - **誰が・いつ・どこに行くのか** を一目で把握できる
  - **いつまでに何をやる必要があるか**（申込・支払・印刷・準備）を整理できる
  - **ダブルブッキングや物理的に無理なスケジュール** を早めに検知できる
- 一方で、
  - 大学情報の網羅
  - 合否照会
  - 公式出願ポータル
  といった領域には踏み込まず、**家庭内の情報整理・役割分担に特化**する。


## 3. MVPに含める機能スコープ

### 3.1 家族・メンバー管理

- **家族アカウント作成**
  - 当面は「1アカウント＝1家族」を前提とする
- **家族メンバー管理**
  - ロール：`parent` / `child`（＋必要なら `admin`）
  - 子どもごとの基本情報（名前、学年など）
- アクセス制御：
  - MVPでは「家族全員で共有」を基本とし、細かい権限管理は後回しにする

### 3.2 イベント管理（学校・塾・習い事・受験）

- **イベントのCRUD**
  - タイトル
  - 日付・開始時刻・終了時刻
  - 種別：`school` / `cram` / `lesson` / `exam` / `other`
  - 重要度：`must` / `should` / `optional`
  - 参加者：1人以上の子ども、必要に応じて保護者
  - 任意項目：場所、メモ
- **カレンダービュー**
  - 家族全体の **週表示・月表示**
  - 子ども・イベント種別によるフィルタ

### 3.3 準備タスク（イベントに紐づくToDo）

- 各イベントに対して **準備タスク** を紐づけられる
  - タイトル
  - 期限（due date）
  - ステータス：`not_started` / `in_progress` / `done`
  - 担当者：保護者A／保護者B／子ども など
- 主な用途：
  - 受験・模試の申込
  - 受験料などの支払
  - 受験票印刷
  - 持ち物・書類の準備
- MVPでは **タスクはユーザーが手動で追加する**  
  （テンプレートによる自動生成は将来機能として扱う）

### 3.4 子ども別ビュー

- 各子どもに対して次のビューを提供する：
  - **「今週の予定」ビュー**
    - その子が関わるイベント（7日間程度）を一覧表示
  - **「今週のタスク」ビュー**
    - その子に紐づくタスクをステータス別に表示
- 目的：
  - 子ども本人、もしくは保護者が、「この子の今週の予定・やること」を1画面で把握できること

### 3.5 Googleカレンダー連携（読み取り専用）

- **1家族につき1つのGoogleアカウント**を「親用カレンダー」として接続する
- 対応範囲（MVP）：
  - 指定期間（例：今週〜来週）のGoogleカレンダー予定を読み取り
  - アプリ内の家族カレンダー上に、**外部イベントとして重ねて表示**
  - Google由来のイベントは、アプリ内イベントと区別がつくように表示（アイコンやスタイルなど）
- スコープ：
  - MVPでは **一方向・読み取り専用（Google → 本アプリ）**
  - 本アプリからGoogleカレンダーへイベントを作成・更新する機能はMVP対象外

### 3.6 コンフリクト（二重予約）検知

- **重要度 `must` のイベント同士の時間重複を検知**
  - 同じ子どもが同じ時間帯に2つの `must` イベントに参加している
  - 同じ保護者が、同じ時間帯に2つの `must` イベントに割り当てられている（必要に応じて）
- 検知結果の表示：
  - カレンダー上で、該当イベントを赤枠・警告アイコンなどで表示
- MVPではロジックをシンプルに：
  - 同一日・同一時間帯の重複チェック程度からスタート（複雑な繰り返し予定は扱わない）

### 3.7 簡易メモ・ジャーナル

- 各イベントに対して **簡単なテキストメモ** を1つ以上登録できる：
  - 例：「先生に頑張りを褒められた」「模試のあとに家族でラーメン」
- MVPでは：
  - プレーンテキストのみ
  - 画像アップロードやリッチテキストは対象外


## 4. 将来機能（MVP対象外だが考慮しておきたいもの）

> これらは **MVPリリースの必須条件にはしない**。  
> 余裕があれば実装、もしくは次フェーズ候補とする。

- **受験テンプレート**
  - 「模試」「本番試験（A日程／B日程）」用のタスクセット
  - イベント作成時にテンプレートを選ぶと、標準タスクが自動生成される
- **週次PDF出力**
  - 子ども1人あたり「今週の予定 & タスク」シートをPDFで出力
- **コンフリクト一覧画面**
  - カレンダーとは別に、現在発生しているコンフリクトのリストを表示
- **ジャーナル／スタンプ強化**
  - タスク完了時に「Good Job」スタンプなど簡易なリアクションをつける
- **高度な連携**
  - Googleカレンダーとの双方向同期
  - 学校ポータルとの連携
  - 学校・塾プリントのOCR → イベント候補自動生成
- **UI/UX強化**
  - ダークモード
  - アニメーションやテーマ設定


## 5. 技術的スコープと制約（Azure前提）

- **フロントエンド / バックエンド**
  - Next.js（App Router, TypeScript, React Compiler 有効）
  - サーバーサイド処理は Next.js の Route Handlers / API Routes を利用

- **データベース**
  - 本番環境の主なDBは **Azure上のリレーショナルDB** とする：
    - 候補：Azure Database for PostgreSQL もしくは Azure SQL Database
  - ORMとして Prisma 等を利用し、Next.js からAzure DBに接続する前提
  - ローカル開発では SQLite などの簡易DBで代替し、最終的にAzure DBにマイグレーションしてもよい

- **認証**
  - MVPではシンプルな認証方式を想定：
    - 例：メールアドレス＋パスワード認証（Azure DBにハッシュを保存）
    - もしくは Auth.js（旧 NextAuth.js）などのライブラリを利用
  - 複雑なロールベース権限管理は行わない（家族内共有が前提）

- **ホスティング**
  - 開発〜MVPデモ：
    - Vercel などを用いて迅速にデプロイしてもよい
  - 本番想定・Tech0向け学習の観点では：
    - Next.js フロントを Azure App Service または Azure Static Web Apps にデプロイ
    - DBは Azure Database for PostgreSQL / Azure SQL Database を利用
  - いずれの場合も、GitHub 連携による CI/CD を前提とする

- **Googleカレンダー**
  - Google Calendar API（OAuth2）を利用
  - リフレッシュトークン等は Azure DB もしくは Azure Key Vault 等の安全なストアで管理
  - MVPでは「1家族 = 1カレンダー」「読み取り専用」のみ対応

**MVPでの非ゴール**

- 大学・高校などの詳細な受験情報データベースを自前で構築・維持すること
- 大学・試験団体と公式に連携した出願ポータル機能
- 複雑な時間割最適化やAIによる自動スケジュール提案
- ネイティブモバイルアプリ（Webアプリで十分）


## 6. キーユースケース（実装時に意識するシナリオ）

実装・設計判断の際には、以下の代表シナリオが成立することを優先する。

### 6.1 保護者が家族と子どもを登録する

- 家族アカウントを作成
- 子ども（＋必要ならもう一人の保護者）を登録する

### 6.2 保護者が今後のイベントを入力する

- 学校プリント・塾のお知らせ・Web情報を見ながら、
  - 模試
  - 本番試験
  - 塾・習い事
  - 学校行事
  をイベントとして登録
- 各イベントに、該当する子どもを紐づける

### 6.3 保護者が準備タスクを登録・分担する

- 試験・模試イベントに対して、次のようなタスクを登録：
  - 「◯月◯日までに申込」
  - 「◯月◯日までに受験料支払」
  - 「前日までに受験票印刷」
  - 「当日の持ち物準備」
- タスクを、
  - 保護者A
  - 保護者B
  - 子ども本人
  などにアサインする

### 6.4 保護者がGoogleカレンダーを連携し、全体を俯瞰する

- 自分のGoogleアカウントを連携
- 仕事の予定などが家族カレンダーと重ねて表示される
- 受験・習い事などの `must` イベントと仕事予定のバッティングが一目で分かる

### 6.5 子ども（または保護者）が「今週の予定」を確認する

- 子ども別ビューを開き、
  - 今週のイベント
  - 今週のタスク
  を一覧で確認する
- 子どもまたは保護者が、終わったタスクを「完了」に更新する

---

上記の内容をMVPの仕様とし、  
実装・スコープ調整・AIコーディング（Codex 等）においては  
この `description.md` を常に参照する前提で進める。
